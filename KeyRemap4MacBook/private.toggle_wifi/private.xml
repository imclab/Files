<?xml version="1.0"?>
<root>

  <vkopenurldef>
    <name>KeyCode::VK_OPEN_URL_SHELL_toggle_wifi</name>
    <url type="shell">
      <![CDATA[
        CURRENT_DEVICE=`/usr/sbin/networksetup -listallhardwareports | /usr/bin/awk '$3=="Wi-Fi" {getline; print $2}'`;
        if [ -z "$CURRENT_DEVICE" ]; then
          /usr/bin/osascript -e 'display notification "No Wi-Fi device" with title "KeyRemap4MacBook"';
        else
          if /usr/sbin/networksetup -getairportpower $CURRENT_DEVICE | /usr/bin/grep ': On'; then
            /usr/sbin/networksetup -setairportpower $CURRENT_DEVICE off
            /usr/bin/osascript -e 'display notification "Wi-Fi Off" with title "KeyRemap4MacBook"';
          else
            /usr/sbin/networksetup -setairportpower $CURRENT_DEVICE on
            /usr/bin/osascript -e 'display notification "Wi-Fi On" with title "KeyRemap4MacBook"';
          fi
        fi
      ]]>
    </url>
  </vkopenurldef>

  <item>
    <name>Toggle Wi-Fi by fn-w</name>
    <identifier>private.toggle_wifi</identifier>

    <autogen>
      __KeyToKey__
      KeyCode::W, ModifierFlag::FN,
      KeyCode::VK_OPEN_URL_SHELL_toggle_wifi,
    </autogen>
  </item>

</root>
